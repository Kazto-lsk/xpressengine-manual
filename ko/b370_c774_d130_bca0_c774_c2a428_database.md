# 데이터베이스(database)

Laravel 의 데이터베이스를 사용하면서 다중 연결 설정을 통한 부한분산 처리와 Query 처리할 때 추가적인 처리가 가능한 구조를 제공합니다. xe.php 에서 database 설정을 통해 여러개의 connection 을 설정 할 수 있으며 패키지별로 다른 connection을 사용해 부하분산을 처리할 수 있습니다.

XE3 에서는 default, document, user 세개 connection 을 정의하고 있으며 laravel database connection 설정 및 xe database 설정을 통해 부하분산을 처리할 수 있습니다.

ProxyManager 는 Query 처리할 때 추가적인 처리를 지원하기 위한 인터페이스를 제공하며 DynamicField 는 Database 의 ProxyInterface 를 이용해 구현되었습니다.


## VirtualConnection
여러개의 논리적인 데이터베이스 연결을 사용하여 다중 커넥션 사용을 가능하도록 하고 서버에 트래픽이 증가할 경우 패키지별 데이터베이스 연결 설정을 변경하여 부하분산을 빠르게 처리할 수 있도록 합니다. 또한 하나의 논리적인 데이터베이스 연결에 여러개의 데이터베이스 연결 설정을 할 수 있도록 하고 Query 처리할 때 랜덤하게 커넥션을 사용하도록 구현하여 부하분산을 처리합니다. 물리적으로 다른 여러개의 커넥션에 대해서 트랜젝션을 사용할 수 있습니다. 여러개의 커넥션에서 각각 발생하는 트랜젝션을 관리하여 하나의 커넥션에서 처리되는 것과 같이 동작합니다. 다이나믹 쿼리를 이용해서 ProxyManager 에 등록된 Proxy 들을 사용할 수 있습니다. 다이나믹 쿼리는 데이터베이스 CRUD 처리 시 발생하여 쿼리를 조작할 수 있도록 인터페이스를 제공합니다. ProxyInterface 의 인터페이스를 QueryBuilder 에서 각 메소드에서 필요한 인터페이스를 사용합니다.

## DatabaseHandler
DatabaseHandler 는 Laravel의 DatabaseManager(\Illuminate\Database\DatabaseManager)를 대체합니다. 